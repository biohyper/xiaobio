<!DOCTYPE html>
<html>

<head>
    <title>
         Macä¸»æœºVirtualBoxä¸­è°ƒæ•´Linuxç³»ç»Ÿç£ç›˜å¤§å° - xiaobio 
    </title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Life it self">

    <link rel="stylesheet" type="text/css" href="asset/cuckoo.css">
    <link rel="stylesheet" type="text/css" href="asset/main.css">
    <link rel="stylesheet" type="text/css" href="asset/atom-one-light.css">

    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="xiaobio">

    <script src="asset/highlight.pack.js"></script>
<!--    <script>hljs.initHighlightingOnLoad();</script>-->
</head>

<body>
    <header class="site-header cuckoo">
        <div class="wrapper">
            <a class="site-title" href="index.html">xiaobio</a>
            <nav class="site-nav">
                <a href="#" class="menu-icon">
                    <svg viewBox="0 0 18 15">
                        <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
                        <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
                        <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
                    </svg>
                </a>
                <div class="trigger">
                    
                        <a class="page-link" href="index.html">Home</a>
                    
                        <a class="page-link" href="archives.html">Archives</a>
                    
                        <a class="page-link" href="about.html">About</a>
                    
                </div>
            </nav>
        </div>
    </header>
</body>

</html>
 <div class="page-content cuckoo">
    <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
            <header class="post-header">
                <h1 class="post-title" itemprop="name headline">Macä¸»æœºVirtualBoxä¸­è°ƒæ•´Linuxç³»ç»Ÿç£ç›˜å¤§å°</h1>
                <div class="post-description">
                    
                </div>
            </header>
            <div class="post-content" itemprop="articleBody">
                <p>ç ”ç©¶è™šæ‹Ÿæœºæ­å»ºHadoopç¯å¢ƒï¼Œè¿‡ç¨‹ä¸­masterä¸»æœºå‡ºç°ç£ç›˜å®¹é‡ä¸è¶³é—®é¢˜ï¼ŒæŸ¥é˜…èµ„æ–™åè§£å†³ï¼Œä½œæ­¤è®°å½•ã€‚</p>

<h2 id="toc_0">å‡†å¤‡å·¥ä½œ</h2>

<p>æŸ¥çœ‹è™šæ‹Ÿæœºä¸­è™šæ‹Ÿç£ç›˜çš„çš„åˆ†åŒºè¡¨ï¼Œç¡®è®¤å½“å‰å¤§å°ä»¥åŠè‡ªå·±è¦æ‰©åˆ°å¤šå¤§ã€‚<br/>
å› å®‰è£…è™šæ‹Ÿæœºå·²æ˜¯å¾ˆä¹…å‰ï¼Œåˆ°ç”¨æ—¶æ‰å‘ç°æ›¾ç»åªåˆ†é…äº†8Gç¡¬ç›˜å®¹é‡(æˆ‘å½“æ—¶æ˜¯æœ‰å¤šå°æ°”ğŸ˜­)ï¼Œä»¥ä¸‹æ˜¯å‘½ä»¤ï¼š</p>

<span id="more"></span><!-- more -->

<pre class="line-numbers"><code class="language-bash">[root@c0 opt]# fdisk -l

Disk /dev/sda: 8589 MB, 8589934592 bytes
255 heads, 63 sectors/track, 1044 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00017d52

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          64      512000   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              64        1045     7875584   8e  Linux LVM

Disk /dev/mapper/vg_c0-lv_root: 7205 MB, 7205814272 bytes
255 heads, 63 sectors/track, 876 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


Disk /dev/mapper/vg_c0-lv_swap: 855 MB, 855638016 bytes
255 heads, 63 sectors/track, 104 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000
</code></pre>

<h2 id="toc_1">VirtualBoxå¢åŠ ç£ç›˜ç†”ç‚¼</h2>

<p>åœ¨<code>Mac</code>å’Œ<code>Linux</code>ä¸­éœ€è¦ä½¿ç”¨<code>VirtualBox</code>çš„å‘½ä»¤è¡Œè°ƒæ•´è™šæ‹Ÿæœºçš„ç£ç›˜åˆ†é….</p>

<p><code>VirtualBox</code>çš„è¯´æ˜æ–‡æ¡£ä¸­æ˜ç¡®ç»™å‡ºäº†è°ƒæ•´è™šæ‹Ÿæœºç£ç›˜å¤§å°çš„æ–¹æ³•ï¼š</p>

<pre class="line-numbers"><code class="language-text">VBoxManage modifyhd         &lt;uuid&gt;|&lt;filename&gt;
                            [--type normal|writethrough|immutable|shareable|
                                    readonly|multiattach]
                            [--autoreset on|off]
                            [--compact]
                            [--resize &lt;megabytes&gt;|--resizebyte &lt;bytes&gt;]
</code></pre>

<h3 id="toc_2">æŸ¥çœ‹å¯ä»¥ä¿®æ”¹çš„ç£ç›˜</h3>

<p><code>VBoxManage list hdds</code>å‘½ä»¤æ˜¯ç”¨æ¥æŸ¥çœ‹æœ‰å“ªäº›è™šæ‹Ÿæœºçš„ç£ç›˜å¯ä¾›ä¿®æ”¹ï¼ŒåŒ…æ‹¬äº†ç£ç›˜è·¯å¾„å’Œ<code>UUID</code>ï¼Œå¦‚ä¸‹ï¼š</p>

<pre class="line-numbers"><code class="language-text">$ VBoxManage list hdds
UUID:           b81ac2f6-a6a9-434a-9aab-c92858be6d24
Parent UUID:    base
State:          created
Type:           normal (base)
Location:       /Users/yourname/VirtualBox VMs/c0/c0.vdi
Storage format: VDI
Capacity:       30720 MBytes
Encryption:     disabled

UUID:           c3700bb3-a51d-4bff-ac76-578dfcde63d1
Parent UUID:    base
State:          locked write
Type:           normal (base)
Location:       /Users/yourname/VirtualBox VMs/c1/c1.vdi
Storage format: VDI
Capacity:       20479 MBytes
Encryption:     disabled
</code></pre>

<h3 id="toc_3">ä¿®æ”¹ç³»ç»Ÿç£ç›˜å¤§å°</h3>

<p><code>modifyhd</code>æŒ‡ä»¤å°±æ˜¯ç”¨æ¥è°ƒæ•´ç£ç›˜å¤§å°çš„ã€‚å¯¹è±¡å¯ä»¥æ˜¯è™šæ‹Ÿæœºçš„<code>uuid</code>ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šè¦è°ƒæ•´å¤§å°çš„è™šæ‹Ÿæœºç£ç›˜æ–‡ä»¶å(å…¨è·¯å¾„)ã€‚</p>

<pre class="line-numbers"><code class="language-text">$ VBoxManage modifyhd &quot;/Users/yourname/VirtualBox VMs/c0/c0.vdi&quot; --resize 30720
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
</code></pre>

<p>ä»¥ä¸Šå‘½ä»¤æ˜¯å°†<code>/Users/yourname/VirtualBox VMs/c0/c0.vdi</code>ç£ç›˜é‡æ–°è°ƒæ•´ä¸º30Gï¼Œ<code>resize</code>å‚æ•°é»˜è®¤å•ä½æ˜¯<code>MB</code>ã€‚</p>

<blockquote>
<p>ä¿®æ”¹æ˜¯è™šæ‹ŸæœºçŠ¶æ€å¿…é¡»æ˜¯<strong>å…³é—­</strong>çŠ¶æ€ã€‚å¦‚æœè¯¥è™šæ‹Ÿæœºæœ‰å¿«ç…§ï¼ˆsnapshotï¼‰ï¼Œåˆ™åªæœ‰åœ¨åˆ é™¤å¿«ç…§åæ‰èƒ½åœ¨è™šæ‹Ÿæœºå®¢æˆ·ç³»ç»Ÿé‡Œçœ‹åˆ°æ›´æ”¹åçš„ç£ç›˜å®¹é‡ã€‚</p>
</blockquote>

<h2 id="toc_4">CentOS çš„ LVM ç®¡ç†</h2>

<p>é‡æ–°å¯åŠ¨è¯¥è™šæ‹Ÿæœºï¼Œå†æ¬¡æŸ¥çœ‹ç£ç›˜æƒ…å†µï¼š</p>

<pre class="line-numbers"><code class="language-bash">[root@c0 ~]# fdisk -l

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00017d52

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          64      512000   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              64        1045     7875584   8e  Linux LVM

Disk /dev/mapper/vg_c0-lv_root: 7205 MB, 7205814272 bytes
255 heads, 63 sectors/track, 876 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


Disk /dev/mapper/vg_c0-lv_swap: 855 MB, 855638016 bytes
255 heads, 63 sectors/track, 104 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000
</code></pre>

<p>æ­¤æ—¶ï¼Œç£ç›˜å®¹é‡å·²ç»ä¸º30Gï¼Œç£ç›˜å ç”¨æƒ…å†µå´æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼š</p>

<pre class="line-numbers"><code class="language-bash">[root@c0 ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_c0-lv_root
                      6.5G  5.5G  663M  90% /
tmpfs                 499M     0  499M   0% /dev/shm
/dev/sda1             477M   65M  387M  15% /boot
</code></pre>

<p>è¯•è¯•çœ‹ç”¨ dd å‘½ä»¤åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 1GB çš„å—æ–‡ä»¶ï¼š</p>

<pre class="line-numbers"><code class="language-bash"># dd if=/dev/zero of=1.0G.img bs=1M count=1000
dd: writing `1.0G.img&#39;: No space left on device
1+0 records in
0+0 records out
8192 bytes (8.2 kB) copied, 0.00300509 s, 2.7 MB/s
</code></pre>

<p>æç¤ºè¯´ç£ç›˜ç©ºé—´ä¸è¶³ï¼ˆNo space left on deviceï¼‰ã€‚è™½ç„¶æˆ‘ä»¬ç»™äº†è™šæ‹Ÿæœºè¶³å¤Ÿçš„ç©ºé—´ï¼Œä½†æ˜¯è™šæ‹Ÿæœºé‡Œçš„ç³»ç»Ÿï¼ˆè¿™é‡Œæ˜¯ CentOSï¼‰å¹¶æ²¡æœ‰å°†è¿™ä¸€éƒ¨åˆ†ç©ºé—´åˆ©ç”¨ä¸Šã€‚å¯ä»¥çœ‹åˆ°ï¼Œè™šæ‹Ÿæœºé‡Œçš„ç£ç›˜ç©ºé—´åªæœ‰ 1.7Gï¼ŒåŸå§‹åˆ†é…çš„ 3G æ²¡æœ‰ç”¨å®Œã€‚è¿™åŒæ—¶ä¹Ÿè¯´æ˜ï¼Œå³ä½¿åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™ä½¿ç”¨åŠ¨æ€åˆ†é…ç£ç›˜å¤§å°ï¼Œè™šæ‹Ÿæœºé‡Œçš„ç³»ç»Ÿä¹Ÿå¹¶ä¸ä¼šè‡ªåŠ¨ä¿®æ”¹è‡ªå·±çš„ç£ç›˜ã€‚å¦‚æœæ˜¯æ­£å¸¸ä½¿ç”¨ï¼Œå³ä½¿è™šæ‹Ÿæœºçš„è™šæ‹Ÿç£ç›˜è¶³å¤Ÿå¤§ï¼Œè¿˜æ˜¯å¯èƒ½ä¼šåœ¨è™šæ‹Ÿæœºä¸­é‡åˆ°ç£ç›˜ç©ºé—´ä¸è¶³çš„è­¦å‘Šã€‚</p>

<p>ä¸‹é¢è°ƒæ•´è™šæ‹Ÿæœºä¸­æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä½¿ä¹‹å°†æ‰€æœ‰ç©ºé—´åˆ©ç”¨ä¸Šã€‚</p>

<h3 id="toc_5">å°†ç©ºä½™ç£ç›˜åˆ›å»ºä¸º<code>sda3</code></h3>

<p>é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºï¼Œç™»å…¥ CentOSï¼Œä½¿ç”¨ fdisk å°†è™šæ‹Ÿç£ç›˜çš„ç©ºé—²ç©ºé—´åˆ›å»ºä¸ºä¸€ä¸ªæ–°çš„åˆ†åŒºã€‚æ³¨æ„è¦ä½¿ç”¨ä»£è¡¨ Linux LVM çš„åˆ†åŒºå· 8e æ¥ä½œä¸º IDã€‚</p>

<pre class="line-numbers"><code class="language-bash">[root@c0 ~]# fdisk /dev/sda

WARNING: DOS-compatible mode is deprecated. It&#39;s strongly recommended to
         switch off the mode (command &#39;c&#39;) and change display units to
         sectors (command &#39;u&#39;).
Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00017d52

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          64      512000   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              64        1045     7875584   8e  Linux LVM

Command (m for help): n
Command action
   e   extended
   p   primary partition (1-4)
p
Partition number (1-4): 3
First cylinder (1045-3916, default 1045): t
First cylinder (1045-3916, default 1045):
Using default value 1045
Last cylinder, +cylinders or +size{K,M,G} (1045-3916, default 3916):
Using default value 3916

Command (m for help): t
Partition number (1-4): 3

Hex code (type L to list codes): L

 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris
 1  FAT12           39  Plan 9          82  Linux swap / So c1  DRDOS/sec (FAT-
 2  XENIX root      3c  PartitionMagic  83  Linux           c4  DRDOS/sec (FAT-
 3  XENIX usr       40  Venix 80286     84  OS/2 hidden C:  c6  DRDOS/sec (FAT-
 4  FAT16 &lt;32M      41  PPC PReP Boot   85  Linux extended  c7  Syrinx
 5  Extended        42  SFS             86  NTFS volume set da  Non-FS data
 6  FAT16           4d  QNX4.x          87  NTFS volume set db  CP/M / CTOS / .
 7  HPFS/NTFS       4e  QNX4.x 2nd part 88  Linux plaintext de  Dell Utility
 8  AIX             4f  QNX4.x 3rd part 8e  Linux LVM       df  BootIt
 9  AIX bootable    50  OnTrack DM      93  Amoeba          e1  DOS access
 a  OS/2 Boot Manag 51  OnTrack DM6 Aux 94  Amoeba BBT      e3  DOS R/O
 b  W95 FAT32       52  CP/M            9f  BSD/OS          e4  SpeedStor
 c  W95 FAT32 (LBA) 53  OnTrack DM6 Aux a0  IBM Thinkpad hi eb  BeOS fs
 e  W95 FAT16 (LBA) 54  OnTrackDM6      a5  FreeBSD         ee  GPT
 f  W95 Ext&#39;d (LBA) 55  EZ-Drive        a6  OpenBSD         ef  EFI (FAT-12/16/
10  OPUS            56  Golden Bow      a7  NeXTSTEP        f0  Linux/PA-RISC b
11  Hidden FAT12    5c  Priam Edisk     a8  Darwin UFS      f1  SpeedStor
12  Compaq diagnost 61  SpeedStor       a9  NetBSD          f4  SpeedStor
14  Hidden FAT16 &lt;3 63  GNU HURD or Sys ab  Darwin boot     f2  DOS secondary
16  Hidden FAT16    64  Novell Netware  af  HFS / HFS+      fb  VMware VMFS
17  Hidden HPFS/NTF 65  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE
18  AST SmartSleep  70  DiskSecure Mult b8  BSDI swap       fd  Linux raid auto
1b  Hidden W95 FAT3 75  PC/IX           bb  Boot Wizard hid fe  LANstep
1c  Hidden W95 FAT3 80  Old Minix       be  Solaris boot    ff  BBT
1e  Hidden W95 FAT1
Hex code (type L to list codes): 8e
Changed system type of partition 3 to 8e (Linux LVM)

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.

WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
The kernel still uses the old table. The new table will be used at
the next reboot or after you run partprobe(8) or kpartx(8)
Syncing disks.
</code></pre>

<p>ç®€åŒ–åæ“ä½œå¦‚ä¸‹ï¼š</p>

<pre class="line-numbers"><code class="language-text"># fdisk /dev/sda
  n {new partition}
  p {primary partition}
  3 {partition number}
# æ­¤å¤„å›è½¦
  t {change partition id}
  3 {partition number}
  8e {Linux LVM partition}
  w
</code></pre>

<p>å†æ¬¡æŸ¥çœ‹åˆ†åŒºè¡¨ï¼Œå‘ç°sda3å·²ç»æˆåŠŸåˆ›å»º</p>

<pre class="line-numbers"><code class="language-bash">[root@c0 ~]# fdisk -l

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00017d52

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          64      512000   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              64        1045     7875584   8e  Linux LVM
/dev/sda3            1045        3916    23066662   8e  Linux LVM

Disk /dev/mapper/vg_c0-lv_root: 7205 MB, 7205814272 bytes
255 heads, 63 sectors/track, 876 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000


Disk /dev/mapper/vg_c0-lv_swap: 855 MB, 855638016 bytes
255 heads, 63 sectors/track, 104 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000
</code></pre>

<p>è°ƒæ•´åé‡å¯ä¸‹ï¼Œä¿è¯ç¨³å¦¥ï¼Œä¸ç¡®å®šä¸é‡å¯æ˜¯å¦ä¼šæ­£å¸¸ã€‚</p>

<h3 id="toc_6">è°ƒæ•´ LVM å¤§å°</h3>

<p>å…ˆçœ‹çœ‹å½“å‰ Volume Groupï¼š</p>

<pre class="line-numbers"><code class="language-bash">[root@c0 ~]# vgdisplay
  --- Volume group ---
  VG Name               vg_c0
  System ID
  Format                lvm2
  Metadata Areas        1
  Metadata Sequence No  3
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                2
  Open LV               2
  Max PV                0
  Cur PV                1
  Act PV                1
  VG Size               7.51 GiB
  PE Size               4.00 MiB
  Total PE              1922
  Alloc PE / Size       1922 / 7.51 GiB
  Free  PE / Size       0 / 0
  VG UUID               YdmWnX-Tle4-ovBs-FtPa-0r0R-OWel-h6NXW7
</code></pre>

<p>åç§°ä¸º<code>vg_c0</code>ï¼Œå¯è°ƒæ•´å¤§å°ï¼ˆresizableï¼‰ï¼Œå½“å‰å¤§å°ä¸º<code>7.51GB</code>ã€‚<br/>
æ´»åŠ¨çš„ LVM å·é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>

<pre class="line-numbers"><code class="language-bash">[root@c0 ~]# lvscan
  ACTIVE            &#39;/dev/vg_c0/lv_root&#39; [6.71 GiB] inherit
  ACTIVE            &#39;/dev/vg_c0/lv_swap&#39; [816.00 MiB] inherit
</code></pre>

<p>å…ˆå°†åˆ†é…è¿‡æ¥çš„æ–°ç£ç›˜ç©ºé—´åˆ›å»ºä¸ºä¸€ä¸ªæ–°çš„ç‰©ç†å·ï¼Œ</p>

<pre class="line-numbers"><code class="language-text">[root@c0 ~]# pvcreate /dev/sda3
  Physical volume &quot;/dev/sda3&quot; successfully created
</code></pre>

<p>ç„¶åä½¿ç”¨æ–°çš„ç‰©ç†å·æ¥æ‰©å±•<code>LVM</code>çš„<code>Volume Group</code>æ­¤å¤„ä¸º<code>cg_c0</code></p>

<pre class="line-numbers"><code class="language-text">[root@c0 ~]# vgextend vg_c0 /dev/sda3
  Volume group &quot;vg_c0&quot; successfully extended

</code></pre>

<p>ç„¶åæ‰©å±• LVM çš„é€»è¾‘å· VolGroup-lv_rootï¼Œ</p>

<pre class="line-numbers"><code class="language-text">[root@c0 ~]# lvextend /dev/vg_c0/lv_root  /dev/sda3
  Size of logical volume vg_c0/lv_root changed from 6.71 GiB (1718 extents) to 28.71 GiB (7349 extents).
  Logical volume lv_root successfully resized.
</code></pre>

<p>æœ€åï¼Œè°ƒæ•´é€»è¾‘å·æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ï¼Œ</p>

<pre class="line-numbers"><code class="language-text">[root@c0 ~]# resize2fs /dev/vg_c0/lv_root
resize2fs 1.41.12 (17-May-2010)
Filesystem at /dev/vg_c0/lv_root is mounted on /; on-line resizing required
old desc_blocks = 1, new_desc_blocks = 2
Performing an on-line resize of /dev/vg_c0/lv_root to 7525376 (4k) blocks.
The filesystem on /dev/vg_c0/lv_root is now 7525376 blocks long.
</code></pre>

<p>å®Œæˆã€‚çœ‹çœ‹æ•ˆæœï¼š</p>

<pre class="line-numbers"><code class="language-text">[root@c0 ~]# lvscan
  ACTIVE            &#39;/dev/vg_c0/lv_root&#39; [28.71 GiB] inherit
  ACTIVE            &#39;/dev/vg_c0/lv_swap&#39; [816.00 MiB] inherit
</code></pre>

<pre class="line-numbers"><code class="language-text">  [root@c0 ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_c0-lv_root
                       29G  5.6G   22G  21% /
tmpfs                 499M     0  499M   0% /dev/shm
/dev/sda1             477M   65M  387M  15% /boot
</code></pre>

<blockquote>
<p>å¦å¤–ï¼Œå‡ ä¸ªæœ‰ç”¨çš„ LVM æŒ‡ä»¤ï¼ˆlvm2ï¼‰ï¼š<br/>
lvmdiskscan<br/>
vgdisplay<br/>
pvdisplay<br/>
lvdispay<br/>
vgcreate<br/>
pvcreate<br/>
lvscan<br/>
pvscan<br/>
vgscan</p>
</blockquote>

<p>éƒ¨åˆ†ç»“æœå¦‚ä¸‹ï¼š</p>

<pre class="line-numbers"><code class="language-text">[root@c0 opt]# lvmdiskscan
  /dev/ram0          [      16.00 MiB]
  /dev/root          [      28.71 GiB]
  /dev/ram1          [      16.00 MiB]
  /dev/sda1          [     500.00 MiB]
  /dev/vg_c0/lv_swap [     816.00 MiB]
  /dev/ram2          [      16.00 MiB]
  /dev/sda2          [       7.51 GiB] LVM physical volume
  /dev/ram3          [      16.00 MiB]
  /dev/sda3          [      22.00 GiB] LVM physical volume
  /dev/ram4          [      16.00 MiB]
  /dev/ram5          [      16.00 MiB]
  /dev/ram6          [      16.00 MiB]
  /dev/ram7          [      16.00 MiB]
  /dev/ram8          [      16.00 MiB]
  /dev/ram9          [      16.00 MiB]
  /dev/ram10         [      16.00 MiB]
  /dev/ram11         [      16.00 MiB]
  /dev/ram12         [      16.00 MiB]
  /dev/ram13         [      16.00 MiB]
  /dev/ram14         [      16.00 MiB]
  /dev/ram15         [      16.00 MiB]
  2 disks
  17 partitions
  0 LVM physical volume whole disks
  2 LVM physical volumes
</code></pre>

<pre class="line-numbers"><code class="language-[root@c0">  --- Physical volume ---
  PV Name               /dev/sda2
  VG Name               vg_c0
  PV Size               7.51 GiB / not usable 3.00 MiB
  Allocatable           yes (but full)
  PE Size               4.00 MiB
  Total PE              1922
  Free PE               0
  Allocated PE          1922
  PV UUID               p8JU8y-uZfb-Ytjl-zjSa-ueLz-SGhs-a8qqC8

  --- Physical volume ---
  PV Name               /dev/sda3
  VG Name               vg_c0
  PV Size               22.00 GiB / not usable 2.04 MiB
  Allocatable           yes (but full)
  PE Size               4.00 MiB
  Total PE              5631
  Free PE               0
  Allocated PE          5631
  PV UUID               84lY2p-POLa-5g2L-m8pZ-NVWO-UyLg-zWLIWS
</code></pre>

<p>è¯¥æ–‡ç« å‚è€ƒ<a href="https://cnzhx.net/blog/resizing-lvm-centos-virtualbox-guest/">æ°´æ™¯ä¸€é¡µ</a>ï¼Œæ„Ÿè°¢ä½œè€…!</p>

            </div>
            <div>
                
                
                
            </div>
        </article>
    </div>
</div>

<script src="asset/jquery-3.3.1.min.js"></script>

<script>
    $(document).ready(function() {
        $('#footer').show()
    })
</script>
  <footer id="footer" class="cuckoo page-footer" style="display: none">
    <div class="wrapper">
        <p>Designed and Written by <a href="mailto:forrestchang7@gmail.com">Jiayuan Zhang</a></p>
    </div>
</footer>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

